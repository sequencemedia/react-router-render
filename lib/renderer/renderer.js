'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.Renderer=undefined;var _react=require('react');var _react2=_interopRequireDefault(_react);var _reactRouter=require('react-router');var _server=require('react-dom/server');var _server2=_interopRequireDefault(_server);var _boom=require('boom');var _boom2=_interopRequireDefault(_boom);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}var ROUTER_MATCH='Renderer encountered an error raised by ReactRouter.match()';var REACT_RENDER='Renderer caught an implementation error in ReactDOMServer.renderToString()';var badImplementation=function badImplementation(e,message){return _boom2.default.wrap(e,500,message);};var notFound=function notFound(location){return _boom2.default.notFound('ReactRouter.match() cannot find '+location);};/**
 * @return {String}
 */var renderToString=function renderToString(props){return _server2.default.renderToString(_react2.default.createElement(_reactRouter.RouterContext,props));};var Renderer=exports.Renderer=function Renderer(){_classCallCheck(this,Renderer);this.render=function(routes,location){return new Promise(function(resolve,reject){(0,_reactRouter.match)({routes:routes,location:location},function(e,redirect,props){var b=void 0;if((b=!!e)||!redirect&&!props){return reject(b?badImplementation(e,ROUTER_MATCH):notFound(location));}if(redirect)return resolve({redirect:redirect});try{var rendered=renderToString(props);resolve({rendered:rendered});}catch(e){reject(badImplementation(e,REACT_RENDER));}});});};}/**
   * @return {Promise}
   */;